# Variables de Entorno para Railway

## Configuraci칩n Backend (Servicio Backend)

A침ade estas variables en tu servicio backend de Railway:

```bash
# Conexi칩n MySQL (REQUERIDA)
DATABASE_URL=mysql+pymysql://root:gtUvNuzREiIaLwZvgspAXRxFLaKLsvSu@mysql.railway.internal:3306/railway

# Puerto (Railway lo asigna autom치ticamente, NO configurar)
# PORT se asigna autom치ticamente por Railway

# Opcional: habilitar reload en desarrollo (NO usar en producci칩n)
# RELOAD=false
```

## 丘멆잺 IMPORTANTE

1. **NO CAMBIES** el host `mysql.railway.internal` - es la red interna de Railway
2. Railway asigna el puerto autom치ticamente mediante `$PORT`
3. La contrase침a ya est치 incluida en el DATABASE_URL

## 游 Pasos para Deploy

### 1. Configurar Variables en Railway

1. Ve a tu proyecto en Railway
2. Selecciona el servicio **Backend**
3. Ve a **Variables** tab
4. A침ade una nueva variable:
   - **Key**: `DATABASE_URL`
   - **Value**: `mysql+pymysql://root:gtUvNuzREiIaLwZvgspAXRxFLaKLsvSu@mysql.railway.internal:3306/railway`
5. Guarda los cambios

### 2. Configurar Root Directory

Si tu backend est치 en una subcarpeta:
1. Ve a **Settings** del servicio backend
2. En **Root Directory** pon: `backend`
3. Guarda cambios

### 3. Deploy Autom치tico

Railway desplegar치 autom치ticamente cuando detecte los cambios en GitHub.

### 4. Migrar Datos (OPCIONAL)

Si quieres migrar tus datos actuales de SQLite local a MySQL:

```powershell
# Configurar DATABASE_URL temporalmente para la migraci칩n
$env:DATABASE_URL="mysql+pymysql://root:gtUvNuzREiIaLwZvgspAXRxFLaKLsvSu@mysql.railway.internal:3306/railway"

# Ejecutar script de migraci칩n
python migrate_to_mysql.py
```

**Nota**: Solo ejecuta esto desde un entorno que pueda acceder a la red interna de Railway (no funcionar치 desde tu m치quina local a menos que uses Railway CLI con port forwarding).

### 5. Verificar Deploy

Una vez desplegado:
1. Railway te dar치 una URL p칰blica: `https://tu-proyecto.up.railway.app`
2. Prueba los endpoints:
   - `GET /` - Verificar que la API responde
   - `GET /api/v1/products` - Lista de productos
   - `GET /api/v1/creatinas` - Lista de creatinas
   - `GET /api/v1/preentrenos` - Lista de pre-entrenos

## 游닇 Formato DATABASE_URL

```
mysql+pymysql://[usuario]:[contrase침a]@[host]:[puerto]/[database]
```

Desglose de tu configuraci칩n:
- **Usuario**: `root`
- **Contrase침a**: `gtUvNuzREiIaLwZvgspAXRxFLaKLsvSu`
- **Host**: `mysql.railway.internal` (red interna Railway)
- **Puerto**: `3306` (puerto est치ndar MySQL)
- **Database**: `railway`

## 游댢 Troubleshooting

### Error: "Can't connect to MySQL server"
- Verifica que el servicio MySQL est칠 corriendo en Railway
- Confirma que ambos servicios (backend y MySQL) est치n en el mismo proyecto
- Usa `mysql.railway.internal` (no la URL p칰blica del MySQL)

### Error: "Access denied for user"
- Verifica que la contrase침a en DATABASE_URL sea correcta
- No debe haber espacios al principio o final de la variable

### Tablas no existen
- Las tablas se crean autom치ticamente al iniciar la app
- Verifica los logs en Railway para ver si hay errores de conexi칩n
- Si persiste, ejecuta el script de migraci칩n o seed

## 游댏 Seguridad

丘멆잺 **NO COMPARTAS** estas credenciales p칰blicamente. Si este archivo se sube a GitHub:
1. Aseg칰rate de que el repositorio sea privado
2. O usa variables de entorno en Railway sin hardcodearlas
3. Considera rotar las credenciales peri칩dicamente desde Railway Dashboard

## 游 Soporte

Si necesitas regenerar las credenciales:
1. Ve a tu servicio MySQL en Railway
2. **Variables** tab
3. Regenera las credenciales desde ah칤
4. Actualiza el DATABASE_URL en el servicio backend
